<div class="container">
  <h2>üí∞ Station Earnings Dashboard - MAS</h2>

  <div class="cards">

    <div class="card">
      <h3>üéü Unreserved Tickets</h3>
      <p>Avg Per Day: ‚Çπ {{ earningsData.unreserved.avgPerDay | number }}</p>
      <p>Total (2024-25): ‚Çπ {{ earningsData.unreserved.total2024 | number }}</p>
    </div>

    <div class="card">
      <h3>üßæ Reserved Tickets</h3>
      <p>Avg Per Day: ‚Çπ {{ earningsData.reserved.avgPerDay | number }}</p>
      <p>Total (2024-25): ‚Çπ {{ earningsData.reserved.total2024 | number }}</p>
    </div>

    <div class="card">
      <h3>üì¶ Parcel & Luggage</h3>
      <p>Avg Per Day: ‚Çπ {{ earningsData.parcel.avgPerDay | number }}</p>
      <p>Total (2024-25): ‚Çπ {{ earningsData.parcel.total2024 | number }}</p>
    </div>

    <div class="card">
      <h3>üö® Ticket Checking</h3>
      <p>Avg Per Day: ‚Çπ {{ earningsData.ticketChecking.avgPerDay | number }}</p>
      <p>Total (2024-25): ‚Çπ {{ earningsData.ticketChecking.total2024 | number }}</p>
    </div>

    <div class="card">
      <h3>üõè Retiring Room</h3>
      <p>Total (2024-25): ‚Çπ {{ earningsData.retiringRoom.total2024 | number }}</p>
    </div>

  </div>
  <hr>
<h2>üí∏ Expenditure Contracts</h2>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <input formControlName="contractHead" placeholder="Contract Head">
  <input formControlName="licenseeName" placeholder="Licensee Name">
  <input formControlName="term" placeholder="Term">
  <input formControlName="fromDate" type="date">
  <input formControlName="toDate" type="date">
  <input formControlName="contractValue" type="number" placeholder="Contract Value">
  <input formControlName="remarks" placeholder="Remarks">

  <button type="submit">
    {{ editId ? 'Update' : 'Save' }}
  </button>
</form>

<hr>

<table>
  <tr>
    <th>Head</th>
    <th>Licensee</th>
    <th>Term</th>
    <th>From</th>
    <th>To</th>
    <th>Value</th>
    <th>Remarks</th>
    <th>Actions</th>
  </tr>

  <tr *ngFor="let item of list">
    <td>{{ item.contractHead }}</td>
    <td>{{ item.licenseeName }}</td>
    <td>{{ item.term }}</td>
    <td>{{ item.fromDate | date }}</td>
    <td>{{ item.toDate | date }}</td>
    <td>{{ item.contractValue }}</td>
    <td>{{ item.remarks }}</td>
    <td>
      <button (click)="edit(item)">Edit</button>
      <button (click)="delete(item._id)">Delete</button>
    </td>
  </tr>
</table>
<hr>
<h2>üö¶ TRAFFIC & EARNINGS DETAILS</h2>

<h3>UN-RESERVED TICKET DETAILS</h3>

<form [formGroup]="unreservedForm" (ngSubmit)="saveUnreserved()">

  <input formControlName="avgTicketsPerDay" placeholder="Avg Tickets Per Day">
  <input formControlName="avgPassengersPerDay" placeholder="Avg Passengers Per Day">
  <input formControlName="avgEarningsPerDay" placeholder="Avg Earnings Per Day">

  <button type="submit">
    {{ unreservedEditId ? 'Update' : 'Save' }}
  </button>

</form>

<table>
  <thead>
    <tr>
      <th>Avg Tickets</th>
      <th>Avg Passengers</th>
      <th>Avg Earnings</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of unreservedList">
      <td>{{ item.avgTicketsPerDay }}</td>
      <td>{{ item.avgPassengersPerDay }}</td>
      <td>{{ item.avgEarningsPerDay }}</td>
      <td>
        <button (click)="editUnreserved(item)">Edit</button>
        <button (click)="deleteUnreserved(item._id)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<hr>
<h3>RESERVED TICKET DETAILS</h3>

<form [formGroup]="reservedForm" (ngSubmit)="saveReserved()">

  <input formControlName="avgTransactionsPerDay" placeholder="Avg Transactions Per Day">
  <input formControlName="avgEarningsPerDay" placeholder="Avg Earnings Per Day">
  <input formControlName="year" placeholder="Year (e.g., 2024-25)">
  <input formControlName="totalTransactions" placeholder="Total Transactions">
  <input formControlName="totalEarnings" placeholder="Total Earnings">

  <button type="submit">
    {{ reservedEditId ? 'Update' : 'Save' }}
  </button>

</form>

<table>
  <thead>
    <tr>
      <th>Avg Transactions</th>
      <th>Avg Earnings</th>
      <th>Year</th>
      <th>Total Transactions</th>
      <th>Total Earnings</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of reservedList">
      <td>{{ item.avgTransactionsPerDay }}</td>
      <td>{{ item.avgEarningsPerDay }}</td>
      <td>{{ item.yearlyData[0]?.year }}</td>
      <td>{{ item.yearlyData[0]?.totalTransactions }}</td>
      <td>{{ item.yearlyData[0]?.totalEarnings }}</td>
      <td>
        <button (click)="editReserved(item)">Edit</button>
        <button (click)="deleteReserved(item._id)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>
<hr>
<h3>TICKETING CHECKING DETAILS</h3>

<form [formGroup]="ticketForm" (ngSubmit)="saveTicketChecking()">

  <input formControlName="staffWorking" placeholder="No. of Staff Working">
  <input formControlName="avgCasesPerDay" placeholder="Avg Cases Per Day">
  <input formControlName="avgEarningsPerDay" placeholder="Avg Earnings Per Day">
  <input formControlName="year" placeholder="Year (e.g., 2024-25)">
  <input formControlName="totalCases" placeholder="Total Cases">
  <input formControlName="totalEarnings" placeholder="Total Earnings">

  <button type="submit">
    {{ ticketEditId ? 'Update' : 'Save' }}
  </button>

</form>

<table>
  <thead>
    <tr>
      <th>Staff</th>
      <th>Avg Cases</th>
      <th>Avg Earnings</th>
      <th>Year</th>
      <th>Total Cases</th>
      <th>Total Earnings</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of ticketList">
      <td>{{ item.staffWorking }}</td>
      <td>{{ item.avgCasesPerDay }}</td>
      <td>{{ item.avgEarningsPerDay }}</td>
      <td>{{ item.yearlyData[0]?.year }}</td>
      <td>{{ item.yearlyData[0]?.totalCases }}</td>
      <td>{{ item.yearlyData[0]?.totalEarnings }}</td>
      <td>
        <button (click)="editTicket(item)">Edit</button>
        <button (click)="deleteTicket(item._id)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>
</div>